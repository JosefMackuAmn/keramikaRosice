{"version":3,"sources":["webpack://keramika-rosice/./node_modules/url-search-params-polyfill/index.js","webpack://keramika-rosice/./src/js/index.js","webpack://keramika-rosice/./src/js/utils/ajax.js","webpack://keramika-rosice/./src/js/utils/data.js","webpack://keramika-rosice/./src/js/utils/functions.js","webpack://keramika-rosice/./src/js/utils/state.js","webpack://keramika-rosice/webpack/bootstrap","webpack://keramika-rosice/webpack/runtime/compat get default export","webpack://keramika-rosice/webpack/runtime/define property getters","webpack://keramika-rosice/webpack/runtime/global","webpack://keramika-rosice/webpack/runtime/hasOwnProperty shorthand","webpack://keramika-rosice/webpack/runtime/make namespace object","webpack://keramika-rosice/webpack/startup"],"names":[],"mappings":";;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,SAAS;AACT,0FAA0F,KAAK;AAC/F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA,eAAe,8BAA8B;AAC7C;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA,eAAe,OAAO;AACtB,eAAe,OAAO;AACtB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,eAAe,OAAO;AACtB,iBAAiB;AACjB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,eAAe,OAAO;AACtB,iBAAiB;AACjB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,eAAe,OAAO;AACtB,iBAAiB;AACjB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB,eAAe,OAAO;AACtB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,0CAA0C,kBAAkB;AAC5D;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,KAAK;;AAEL;;AAEA;;AAEA;AACA;AACA,eAAe,SAAS;AACxB,eAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,mBAAmB,iBAAiB;AACpC;AACA;AACA,mBAAmB,iBAAiB;AACpC;AACA,uBAAuB,mBAAmB;AAC1C;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;;AAGA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA,iCAAiC,EAAE;AACnC;AACA,aAAa;AACb;;AAEA;AACA;AACA;AACA;AACA,wBAAwB;AACxB;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,+BAA+B,mBAAmB;AAClD;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;;AAEA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;;AAEA,SAAS;AACT;AACA;AACA;AACA;;AAEA;AACA,2BAA2B,kBAAkB;AAC7C;AACA;;AAEA;AACA;;AAEA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,CAAC,SAAS,qBAAM,mBAAmB,qBAAM;;;;;;;;;;;;;;;;;;;;;;AC5VL;AACpC;;AAEkC;AACQ;AACL;AACG;;;AAGxC;AACA;AACA,mDAAU;;AAEV;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA,YAAY,yDAAgB;AAC5B;AACA,SAAS;AACT,YAAY,yDAAgB;AAC5B;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA,oBAAoB,yDAAgB;AACpC;AACA;;AAEA;AACA,oBAAoB,yDAAgB;AACpC;AACA;;AAEA;AACA,oBAAoB,yDAAgB;AACpC;AACA;;AAEA;AACA,oBAAoB,yDAAgB;AACpC;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;AA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;;;;;AC5BiD;AACrB;AACG;;AAE/B;AACA;;AAEA;AACA;AACA;AACO;AACP;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;AACO;AACP;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACO;AACP;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACO;AACP;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,QAAQ,wEAAkC;AAC1C;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK,UAAU,wEAAkC;AACjD;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;;AAEA;AACO;;AAEP;AACA;;AAEA;AACA;;AAEA,KAAK;;AAEL;AACA;AACA;AACA;AACO;;AAEP;AACA,uBAAuB,+CAAY;AACnC;AACA;AACA;;AAEA;AACA;AACA;AACA,QAAQ,mDAAgB;AACxB,yCAAyC,mDAAgB;AACzD;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;;AAGA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACO;AACP;AACA;;AAEA;AACA;AACA;AACA,mCAAmC,KAAK;AACxC,sCAAsC,QAAQ;AAC9C,wCAAwC,WAAW;AACnD;AACA;;AAEA;;AAEA;AACA;;AAEA,2DAA2D,SAAI;AAC/D,gEAAgE,SAAI;AACpE;;AAEO;AACP;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACO;;AAEP;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,yCAAyC,MAAM;AAC/C;AACA,UAAU;AACV;AACA,2DAA2D,MAAM;;AAEjE;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA,sEAAsE,SAAI;;AAE1E;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACO;;AAEP,WAAW,kDAAoB;AAC/B;AACA,0E;AACA,2B;AACA,KAAK;AACL;AACA;AACA,KAAK;;AAEL;AACO;;AAEP,WAAW,kDAAoB;AAC/B;AACA,0E;AACA,2B;AACA,KAAK;AACL;AACA,KAAK;;AAEL;AACO;;AAEP;AACA;;AAEA,KAAK;;AAEL;AACA;;AAEA;;AAEA;;AAEA,KAAK;;AAEL,kCAAkC,mBAAmB;AACrD;;AAEA;;AAEA;AACA;AACA;AACA;;AAEO;;AAEP;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEO;;AAEP;;AAEA,6BAA6B,kBAAkB;;AAE/C;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yB;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA,C;;;;;;;;;;;;;;;;ACrYA;AACA;AACA,+DAAe;AACf;AACA;AACA,KAAK;AACL;AACA,C;;;;;;UCPA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;;WCrBA;WACA;WACA;WACA,cAAc,0BAA0B,EAAE;WAC1C,cAAc,eAAe;WAC7B,gCAAgC,YAAY;WAC5C;WACA,E;;;;;WCPA;WACA;WACA;WACA;WACA,wCAAwC,yCAAyC;WACjF;WACA;WACA,E;;;;;WCPA;WACA;WACA;WACA;WACA,EAAE;WACF;WACA;WACA,CAAC,I;;;;;WCPD,6CAA6C,wDAAwD,E;;;;;WCArG;WACA;WACA;WACA,sDAAsD,kBAAkB;WACxE;WACA,+CAA+C,cAAc;WAC7D,E;;;;UCNA;UACA;UACA;UACA","file":"index.js","sourcesContent":["/**\n *\n *\n * @author Jerry Bendy <jerry@icewingcc.com>\n * @licence MIT\n *\n */\n\n(function(self) {\n    'use strict';\n\n    var nativeURLSearchParams = (function() {\n            // #41 Fix issue in RN\n            try {\n                if (self.URLSearchParams && (new self.URLSearchParams('foo=bar')).get('foo') === 'bar') {\n                    return self.URLSearchParams;\n                }\n            } catch (e) {}\n            return null;\n        })(),\n        isSupportObjectConstructor = nativeURLSearchParams && (new nativeURLSearchParams({a: 1})).toString() === 'a=1',\n        // There is a bug in safari 10.1 (and earlier) that incorrectly decodes `%2B` as an empty space and not a plus.\n        decodesPlusesCorrectly = nativeURLSearchParams && (new nativeURLSearchParams('s=%2B').get('s') === '+'),\n        __URLSearchParams__ = \"__URLSearchParams__\",\n        // Fix bug in Edge which cannot encode ' &' correctly\n        encodesAmpersandsCorrectly = nativeURLSearchParams ? (function() {\n            var ampersandTest = new nativeURLSearchParams();\n            ampersandTest.append('s', ' &');\n            return ampersandTest.toString() === 's=+%26';\n        })() : true,\n        prototype = URLSearchParamsPolyfill.prototype,\n        iterable = !!(self.Symbol && self.Symbol.iterator);\n\n    if (nativeURLSearchParams && isSupportObjectConstructor && decodesPlusesCorrectly && encodesAmpersandsCorrectly) {\n        return;\n    }\n\n\n    /**\n     * Make a URLSearchParams instance\n     *\n     * @param {object|string|URLSearchParams} search\n     * @constructor\n     */\n    function URLSearchParamsPolyfill(search) {\n        search = search || \"\";\n\n        // support construct object with another URLSearchParams instance\n        if (search instanceof URLSearchParams || search instanceof URLSearchParamsPolyfill) {\n            search = search.toString();\n        }\n        this [__URLSearchParams__] = parseToDict(search);\n    }\n\n\n    /**\n     * Appends a specified key/value pair as a new search parameter.\n     *\n     * @param {string} name\n     * @param {string} value\n     */\n    prototype.append = function(name, value) {\n        appendTo(this [__URLSearchParams__], name, value);\n    };\n\n    /**\n     * Deletes the given search parameter, and its associated value,\n     * from the list of all search parameters.\n     *\n     * @param {string} name\n     */\n    prototype['delete'] = function(name) {\n        delete this [__URLSearchParams__] [name];\n    };\n\n    /**\n     * Returns the first value associated to the given search parameter.\n     *\n     * @param {string} name\n     * @returns {string|null}\n     */\n    prototype.get = function(name) {\n        var dict = this [__URLSearchParams__];\n        return this.has(name) ? dict[name][0] : null;\n    };\n\n    /**\n     * Returns all the values association with a given search parameter.\n     *\n     * @param {string} name\n     * @returns {Array}\n     */\n    prototype.getAll = function(name) {\n        var dict = this [__URLSearchParams__];\n        return this.has(name) ? dict [name].slice(0) : [];\n    };\n\n    /**\n     * Returns a Boolean indicating if such a search parameter exists.\n     *\n     * @param {string} name\n     * @returns {boolean}\n     */\n    prototype.has = function(name) {\n        return hasOwnProperty(this [__URLSearchParams__], name);\n    };\n\n    /**\n     * Sets the value associated to a given search parameter to\n     * the given value. If there were several values, delete the\n     * others.\n     *\n     * @param {string} name\n     * @param {string} value\n     */\n    prototype.set = function set(name, value) {\n        this [__URLSearchParams__][name] = ['' + value];\n    };\n\n    /**\n     * Returns a string containg a query string suitable for use in a URL.\n     *\n     * @returns {string}\n     */\n    prototype.toString = function() {\n        var dict = this[__URLSearchParams__], query = [], i, key, name, value;\n        for (key in dict) {\n            name = encode(key);\n            for (i = 0, value = dict[key]; i < value.length; i++) {\n                query.push(name + '=' + encode(value[i]));\n            }\n        }\n        return query.join('&');\n    };\n\n    // There is a bug in Safari 10.1 and `Proxy`ing it is not enough.\n    var forSureUsePolyfill = !decodesPlusesCorrectly;\n    var useProxy = (!forSureUsePolyfill && nativeURLSearchParams && !isSupportObjectConstructor && self.Proxy);\n    /*\n     * Apply polifill to global object and append other prototype into it\n     */\n    Object.defineProperty(self, 'URLSearchParams', {\n        value: (useProxy ?\n            // Safari 10.0 doesn't support Proxy, so it won't extend URLSearchParams on safari 10.0\n            new Proxy(nativeURLSearchParams, {\n                construct: function(target, args) {\n                    return new target((new URLSearchParamsPolyfill(args[0]).toString()));\n                }\n            }) :\n            URLSearchParamsPolyfill)\n    });\n\n    var USPProto = self.URLSearchParams.prototype;\n\n    USPProto.polyfill = true;\n\n    /**\n     *\n     * @param {function} callback\n     * @param {object} thisArg\n     */\n    USPProto.forEach = USPProto.forEach || function(callback, thisArg) {\n        var dict = parseToDict(this.toString());\n        Object.getOwnPropertyNames(dict).forEach(function(name) {\n            dict[name].forEach(function(value) {\n                callback.call(thisArg, value, name, this);\n            }, this);\n        }, this);\n    };\n\n    /**\n     * Sort all name-value pairs\n     */\n    USPProto.sort = USPProto.sort || function() {\n        var dict = parseToDict(this.toString()), keys = [], k, i, j;\n        for (k in dict) {\n            keys.push(k);\n        }\n        keys.sort();\n\n        for (i = 0; i < keys.length; i++) {\n            this['delete'](keys[i]);\n        }\n        for (i = 0; i < keys.length; i++) {\n            var key = keys[i], values = dict[key];\n            for (j = 0; j < values.length; j++) {\n                this.append(key, values[j]);\n            }\n        }\n    };\n\n    /**\n     * Returns an iterator allowing to go through all keys of\n     * the key/value pairs contained in this object.\n     *\n     * @returns {function}\n     */\n    USPProto.keys = USPProto.keys || function() {\n        var items = [];\n        this.forEach(function(item, name) {\n            items.push(name);\n        });\n        return makeIterator(items);\n    };\n\n    /**\n     * Returns an iterator allowing to go through all values of\n     * the key/value pairs contained in this object.\n     *\n     * @returns {function}\n     */\n    USPProto.values = USPProto.values || function() {\n        var items = [];\n        this.forEach(function(item) {\n            items.push(item);\n        });\n        return makeIterator(items);\n    };\n\n    /**\n     * Returns an iterator allowing to go through all key/value\n     * pairs contained in this object.\n     *\n     * @returns {function}\n     */\n    USPProto.entries = USPProto.entries || function() {\n        var items = [];\n        this.forEach(function(item, name) {\n            items.push([name, item]);\n        });\n        return makeIterator(items);\n    };\n\n\n    if (iterable) {\n        USPProto[self.Symbol.iterator] = USPProto[self.Symbol.iterator] || USPProto.entries;\n    }\n\n\n    function encode(str) {\n        var replace = {\n            '!': '%21',\n            \"'\": '%27',\n            '(': '%28',\n            ')': '%29',\n            '~': '%7E',\n            '%20': '+',\n            '%00': '\\x00'\n        };\n        return encodeURIComponent(str).replace(/[!'\\(\\)~]|%20|%00/g, function(match) {\n            return replace[match];\n        });\n    }\n\n    function decode(str) {\n        return str\n            .replace(/[ +]/g, '%20')\n            .replace(/(%[a-f0-9]{2})+/ig, function(match) {\n                return decodeURIComponent(match);\n            });\n    }\n\n    function makeIterator(arr) {\n        var iterator = {\n            next: function() {\n                var value = arr.shift();\n                return {done: value === undefined, value: value};\n            }\n        };\n\n        if (iterable) {\n            iterator[self.Symbol.iterator] = function() {\n                return iterator;\n            };\n        }\n\n        return iterator;\n    }\n\n    function parseToDict(search) {\n        var dict = {};\n\n        if (typeof search === \"object\") {\n            // if `search` is an array, treat it as a sequence\n            if (isArray(search)) {\n                for (var i = 0; i < search.length; i++) {\n                    var item = search[i];\n                    if (isArray(item) && item.length === 2) {\n                        appendTo(dict, item[0], item[1]);\n                    } else {\n                        throw new TypeError(\"Failed to construct 'URLSearchParams': Sequence initializer must only contain pair elements\");\n                    }\n                }\n\n            } else {\n                for (var key in search) {\n                    if (search.hasOwnProperty(key)) {\n                        appendTo(dict, key, search[key]);\n                    }\n                }\n            }\n\n        } else {\n            // remove first '?'\n            if (search.indexOf(\"?\") === 0) {\n                search = search.slice(1);\n            }\n\n            var pairs = search.split(\"&\");\n            for (var j = 0; j < pairs.length; j++) {\n                var value = pairs [j],\n                    index = value.indexOf('=');\n\n                if (-1 < index) {\n                    appendTo(dict, decode(value.slice(0, index)), decode(value.slice(index + 1)));\n\n                } else {\n                    if (value) {\n                        appendTo(dict, decode(value), '');\n                    }\n                }\n            }\n        }\n\n        return dict;\n    }\n\n    function appendTo(dict, name, value) {\n        var val = typeof value === 'string' ? value : (\n            value !== null && value !== undefined && typeof value.toString === 'function' ? value.toString() : JSON.stringify(value)\n        );\n\n        // #47 Prevent using `hasOwnProperty` as a property name\n        if (hasOwnProperty(dict, name)) {\n            dict[name].push(val);\n        } else {\n            dict[name] = [val];\n        }\n    }\n\n    function isArray(val) {\n        return !!val && '[object Array]' === Object.prototype.toString.call(val);\n    }\n\n    function hasOwnProperty(obj, prop) {\n        return Object.prototype.hasOwnProperty.call(obj, prop);\n    }\n\n})(typeof global !== 'undefined' ? global : (typeof window !== 'undefined' ? window : this));\n","import 'url-search-params-polyfill';\r\n//import 'fetch-polyfill';\r\n\r\nimport state from './utils/state';\r\nimport * as fcns from './utils/functions';\r\nimport * as ajax from './utils/ajax';\r\nimport { formELs }  from './utils/data';\r\n\r\n  \r\n///////////////////////////////////\r\n///// CALLING READY FUNCTION\r\nfcns.ready(() => {\r\n\r\n    /////\r\n    // SHOW MODAL\r\n    /////\r\n\r\n    const params = new URLSearchParams(window.location.search);\r\n    const announcementInput = document.getElementById('announcement');\r\n\r\n    let modalShown = false;\r\n    \r\n    if (params.has('payment')) {\r\n\r\n        const payment = params.get('payment');\r\n\r\n        if (payment === 'success') {\r\n            fcns.createModal('Úspěch', 'Platba proběhla úspěšně. Faktura k objednávce Vám přišla na e-mail.', 'OK');\r\n            modalShown = true;\r\n        } else if (payment === 'canceled') {\r\n            fcns.createModal('Storno', 'Platba byla přerušena, ale prodejce byl o Vaší objednávce informován a kontaktuje Vás.', 'OK');\r\n            modalShown = true;\r\n        }\r\n\r\n        if(payment === 'BTR') {\r\n\r\n            if(params.has('success') && params.has('mailSent')) {\r\n\r\n                const success = params.get('success');\r\n                const mailSent = params.get('mailSent');\r\n\r\n                if(success === 'true' && mailSent === 'true') {\r\n                    fcns.createModal('Odesláno', 'Objednávka byla odeslána. <em>Byl vám zaslán mail s pokyny k platbě.</em>', 'OK', true);\r\n                    modalShown = true;\r\n                }\r\n\r\n                if(success === 'true' && mailSent === 'false') {\r\n                    fcns.createModal('Nepovedlo se odeslat e-mail', '<em> Objednávku jsme zaregistrovali, ale nepodařil se odeslat mail s informacemi k platbě. Prosím, kontaktujte mě na adrese keramikarosice@seznam.cz </em>', 'OK', true);\r\n                    modalShown = true;\r\n                }\r\n\r\n                if(success === 'false' && mailSent === 'true') {\r\n                    fcns.createModal('Chyba', 'Nastala chyba, objednávku se nepodařilo odeslat.', 'OK');\r\n                    modalShown = true;\r\n                }\r\n\r\n                if(success === 'false' && mailSent === 'false') {\r\n                    fcns.createModal('Chyba', 'Nastala chyba, objednávku se nepodařilo odeslat.', 'OK');\r\n                    modalShown = true;\r\n                }\r\n\r\n            }\r\n            \r\n        }\r\n\r\n        if(payment === 'DOB') {\r\n            \r\n            if(params.has('success') && params.has('mailSent')) {\r\n\r\n                const success = params.get('success');\r\n                const mailSent = params.get('mailSent');\r\n\r\n                if(success === 'true' && mailSent === 'true') {\r\n                    fcns.createModal('Úspěch', 'Objednávka proběhla úspěšně. Faktura vám přišla na mail.', 'OK');\r\n                    modalShown = true;\r\n                }\r\n\r\n                if(success === 'true' && mailSent === 'false') {\r\n                    fcns.createModal('Úspěch', 'Objednávka proběhla úspěšně', 'OK');\r\n                    modalShown = true;\r\n                }\r\n\r\n                if(success === 'false' && mailSent === 'true') {\r\n                    fcns.createModal('Chyba', 'Nastala chyba, objednávku se nepodařilo odeslat.', 'OK');\r\n                    modalShown = true;\r\n                }\r\n\r\n                if(success === 'false' && mailSent === 'false') {\r\n                    fcns.createModal('Chyba', 'Nastala chyba, objednávku se nepodařilo odeslat..', 'OK');\r\n                    modalShown = true;\r\n                }\r\n            }\r\n            \r\n        }\r\n    }\r\n    \r\n    if (announcementInput && !modalShown) {\r\n        const announcement = announcementInput.value;\r\n        fcns.createModal('Oznámení', announcement, 'OK');\r\n        modalShown = true;\r\n    }\r\n\r\n    /////\r\n    // MENU\r\n    /////\r\n\r\n    // Select hamburger button and attach click listener\r\n    const hamburgerBtn = state.hamburgerBtn = document.querySelector(\"#hamburger-btn\");\r\n    const headerList = hamburgerBtn.nextElementSibling;\r\n    const headerBackDrop = document.querySelector('.header__backdrop');\r\n\r\n    const toggleHeader = (e) => {\r\n        e.stopPropagation();\r\n\r\n        if(![hamburgerBtn.classList].includes('header__nav-button--hiding')) {\r\n\r\n            fcns.showOrHideEl(hamburgerBtn, 'header__nav-button--show', 'header__nav-button--hide', 'header__nav-button--hiding');\r\n            fcns.showOrHideEl(headerList, 'header__nav-list--hidden', 'header__nav-list--visible', 'header__nav-list--hiding');\r\n            fcns.showOrHideEl(headerBackDrop, 'header__backdrop--hidden', 'header__backdrop--visible', 'header__backdrop--hiding');\r\n\r\n            for (const listItem of headerList.children) {\r\n                fcns.showOrHideEl(listItem, 'header__nav-item--hidden', 'header__nav-item--visible', 'header__nav-item--hiding');\r\n            }\r\n        }\r\n    }\r\n    headerBackDrop.addEventListener('click', toggleHeader);\r\n    hamburgerBtn.addEventListener(\"click\", toggleHeader);\r\n\r\n    ///// Initial update cart amount\r\n    \r\n    const cartAmountEl = document.querySelector('.header__cart-amount');\r\n    const cartAmount = +cartAmountEl.textContent;\r\n    if(cartAmount > 0) {\r\n        cartAmountEl.style.display = 'flex';\r\n    }\r\n\r\n    /////\r\n    // CATEGORIES SLIDER\r\n    /////\r\n\r\n    // Try to find #categories-slider\r\n    const categoriesSlider = document.getElementById(\"categories-slider\");\r\n    // If #categories-slider found\r\n    if (categoriesSlider) {\r\n        // Find arrows\r\n        const arrowLeft = document.getElementById(\"arrow-left\");\r\n        const arrowRight = document.getElementById(\"arrow-right\");\r\n        \r\n        // Attach click listener to arrows\r\n        arrowLeft.addEventListener(\"click\", () => {\r\n            state.categoriesSlider.selectedArr = 'left';\r\n            fcns.moveCategoriesSlider();\r\n        });\r\n        arrowRight.addEventListener(\"click\", () => {\r\n            state.categoriesSlider.selectedArr = 'right';\r\n            fcns.moveCategoriesSlider();\r\n        });        \r\n    }\r\n\r\n    /////\r\n    // CART\r\n    /////\r\n\r\n    ///// TO ORDER BUTTON\r\n\r\n    const toOrderBtn = document.getElementById('to-order');\r\n    if(toOrderBtn) {\r\n        const orderSection = document.getElementById('cart-order');\r\n\r\n        toOrderBtn.addEventListener('click', () => {\r\n            orderSection.scrollIntoView({behavior: 'smooth'});\r\n        })\r\n    }\r\n    \r\n    /////\r\n    // CART & ORDER\r\n    /////\r\n\r\n    ///// Submit button event listener\r\n    const orderForm = document.getElementById('order-form');\r\n    if (orderForm) {\r\n        orderForm.addEventListener('submit', ajax.orderSubmitHandler);\r\n\r\n        fcns.updateCartPage();\r\n    }\r\n\r\n\r\n    // Agreement checkbox event listeners \r\n    \r\n    const agreeGDPR = document.getElementById('agree-gdpr');\r\n    const agreeConditions = document.getElementById('agree-conditions');\r\n    const submitToCartBtn = document.getElementById('submit-order');\r\n    if(orderForm) {\r\n        [agreeGDPR, agreeConditions].forEach(el => el.addEventListener('click', () => {\r\n            el.blur();\r\n        }))\r\n        agreeGDPR.addEventListener('change', () => {\r\n            fcns.refreshSubmitBtn(agreeGDPR, agreeConditions, submitToCartBtn);\r\n        })\r\n        agreeConditions.addEventListener('change', () => {\r\n            fcns.refreshSubmitBtn(agreeGDPR, agreeConditions, submitToCartBtn);\r\n        });\r\n    }\r\n\r\n    ///// Input Validation\r\n    if(orderForm) {\r\n        for (const input of formELs) {\r\n            input.addEventListener('input', fcns.validateInput.bind(this, input));\r\n        }\r\n    }\r\n\r\n    /////DOB Price is 0 when OOD is selected, validating delivery and payment\r\n    if(orderForm) {\r\n\r\n        const orderPayment = document.getElementById('order-payment');\r\n        const orderDelivery = document.getElementById('order-delivery');\r\n        const OODInput = document.getElementById('OOD');\r\n        const DOBpriceEl = document.getElementById('DOBprice');\r\n        const DOBpriceValue = DOBpriceEl.textContent;\r\n        const DOBlabelEl = DOBpriceEl.parentElement.querySelector('label');\r\n        const DOBlabelValue = DOBlabelEl.textContent;\r\n\r\n        if (OODInput.checked) {\r\n            DOBpriceEl.textContent = '0Kč';\r\n            DOBlabelEl.textContent = \"Hotově při převzetí\";\r\n        } else {\r\n            DOBpriceEl.textContent = DOBpriceValue;\r\n            DOBlabelEl.textContent = DOBlabelValue;\r\n        }\r\n\r\n        orderDelivery.addEventListener('input', (event) => {\r\n\r\n            fcns.validateInput(formELs.delivery);\r\n\r\n            if (OODInput.checked) {\r\n                DOBpriceEl.textContent = '0Kč';\r\n                DOBlabelEl.textContent = \"Hotově při převzetí\";\r\n            } else {\r\n                DOBpriceEl.textContent = DOBpriceValue;\r\n                DOBlabelEl.textContent = DOBlabelValue;\r\n            }\r\n        });\r\n        orderPayment.addEventListener('input', () => {\r\n            fcns.validateInput(formELs.payment);\r\n        })\r\n\r\n    }\r\n    \r\n\r\n    //// Managing cart items\r\n    const cartItems = document.querySelectorAll('.cart-item');\r\n\r\n    if(orderForm) {\r\n\r\n        const frogAudio = new Audio('/img/frogAudio.mp3');\r\n        orderForm.querySelector('#firstName').addEventListener('input', fcns.easterTime.bind(this, frogAudio));\r\n\r\n        for(const cartItem of cartItems) {\r\n\r\n            const addButton = cartItem.querySelector('.cart-item__amount-box__btn--add');\r\n            const removeButton = cartItem.querySelector('.cart-item__amount-box__btn--remove');\r\n            const removeAllButton = cartItem.querySelector('.close-button');\r\n            const amountInStock = parseInt(addButton.dataset.instock);\r\n            let amountInCart = parseInt(cartItem.querySelector('.cart-item__amount-box__amount').innerText);\r\n\r\n            addButton.addEventListener('click', async () => {\r\n\r\n                if (amountInCart >= amountInStock) return;\r\n\r\n                const postCartData = {\r\n                    action: 'ADD',\r\n                    productId: cartItem.dataset.productid,\r\n                    csrf: cartItem.dataset.csrf,\r\n                    amount: 1\r\n                }\r\n                \r\n                fcns.addToCart(postCartData).then((updatedCart) => {\r\n                    fcns.updateCartItem(cartItem, updatedCart);\r\n                    amountInCart += 1;\r\n                });\r\n            });\r\n            removeButton.addEventListener('click', () => {\r\n\r\n                const postCartData = {\r\n                    action: 'REMOVE',\r\n                    productId: cartItem.dataset.productid,\r\n                    csrf: cartItem.dataset.csrf,\r\n                    amount: 1\r\n                }\r\n                \r\n                fcns.removeFromCart(postCartData).then((updatedCart) => {\r\n                    fcns.updateCartItem(cartItem, updatedCart);\r\n                    amountInCart -= 1;\r\n                    \r\n                });\r\n            })\r\n            removeAllButton.addEventListener('click', () => {\r\n\r\n                const postCartData = {\r\n                    action: 'REMOVE',\r\n                    productId: cartItem.dataset.productid,\r\n                    csrf: cartItem.dataset.csrf,\r\n                    amount: false\r\n                }\r\n\r\n                fcns.removeFromCart(postCartData).then( (updatedCart) => {\r\n                    fcns.updateCartItem(cartItem, updatedCart);\r\n                    amountInCart = 0;\r\n                })\r\n\r\n            })\r\n        }\r\n    }\r\n    \r\n\r\n    /////\r\n    // E-SHOP\r\n    /////\r\n\r\n    ///// SUBMIT TO CART BUTTON\r\n    const eshopProducts = document.querySelector('.eshop__products');\r\n\r\n    if (eshopProducts) {\r\n        const submitBtns = eshopProducts.querySelectorAll('.post-order-btn');\r\n\r\n        for (const btn of submitBtns) {\r\n            btn.addEventListener('click', () => {\r\n\r\n                // Create object with action ('ADD' || 'REMOVE'), productId, csrf, amount\r\n                const postCartData = {\r\n                    action: 'ADD',\r\n                    productId: btn.dataset.productid,\r\n                    csrf: btn.dataset.csrf,\r\n                    amount: btn.parentElement.querySelector('select').value\r\n                }\r\n\r\n                fcns.addToCart(postCartData).then((updatedCart) => {\r\n                    fcns.updateCartIcon(updatedCart);\r\n                }).catch(err => console.log(err));\r\n                \r\n            })\r\n        }\r\n    }\r\n\r\n    ///// CATEGORY SELECT\r\n    const categorySelect = document.querySelector('.category-select');\r\n\r\n    if (categorySelect) {\r\n        \r\n       \r\n        const categorySelectButtons = categorySelect.querySelectorAll('.category-select__button');\r\n\r\n        for (const btn of categorySelectButtons) {\r\n            const list = btn.parentElement.querySelector('.category-select__subcategory-list');\r\n        \r\n            btn.addEventListener('click', () => {\r\n                // changes the button style\r\n                fcns.switchClass(btn, 'category-select__button--show', 'category-select__button--hide');\r\n                // shows or removes the subcategory list\r\n                if(list) {fcns.showOrHideEl(list, 'category-select__subcategory-list--hidden', 'category-select__subcategory-list--visible', 'category-select__subcategory-list--hiding');}\r\n            });\r\n        }\r\n\r\n        ///// PRODUCT MODAL\r\n        const products = document.querySelectorAll('.product');\r\n\r\n        for (const prod of products) {\r\n            const btnShowProdModal = prod.querySelector('.product__info .to-cart-button');\r\n            const btnCloseProdModal = prod.querySelector('.product__modal__close-button');\r\n            const modal = prod.querySelector('.product__modal');\r\n            const btnAddToCart = modal.querySelector('.to-cart-button');\r\n            \r\n            btnShowProdModal.addEventListener('click', () => {\r\n                // Shows product modal\r\n                fcns.switchClass(modal, 'product__modal--toggled', 'product__modal--hidden');\r\n\r\n                // Removing focus from the showProdModal button\r\n                btnShowProdModal.blur();\r\n\r\n                 // Focusing the modal, so the keydown event can be registered on it\r\n                modal.focus();\r\n            });\r\n            btnCloseProdModal.addEventListener('click', () => {\r\n                // Hides product modal\r\n                fcns.switchClass(modal, 'product__modal--toggled', 'product__modal--hidden');\r\n            });   \r\n            btnAddToCart.addEventListener('click', () => {\r\n                // Hides product modal\r\n                fcns.switchClass(modal, 'product__modal--toggled', 'product__modal--hidden');\r\n            })   \r\n            modal.addEventListener('click', () => {\r\n                // Focusing the, so the keydown event can be registered on it\r\n                modal.focus();\r\n            })\r\n            modal.addEventListener('keydown', (e) => {\r\n                // If the user pressed enter, simulating click on the add-to-cart button\r\n                if(e.key === 'Enter') {\r\n                    btnAddToCart.click();\r\n                }\r\n             })\r\n            \r\n        }\r\n\r\n        ///// MOBILE CATEGORY SELECT\r\n        const categorySelectMobileBtn = categorySelect.querySelector('button');\r\n\r\n        const categorySelectList = categorySelectMobileBtn.parentElement.querySelector('.category-select__category-list');\r\n        const categorySelectHeading = categorySelectMobileBtn.parentElement.querySelector('.heading-2');\r\n        const categorySelectBackdrop = document.querySelector('.category-select__backdrop');\r\n        \r\n        const footer = document.querySelector('footer');\r\n    \r\n        window.addEventListener('scroll', () => {\r\n            const footerY = footer.getBoundingClientRect().y;\r\n            const btnY = categorySelectMobileBtn.getBoundingClientRect().y;\r\n    \r\n            if (footerY >= btnY) {\r\n                categorySelectList.classList.remove('scrollLocked');\r\n                categorySelectHeading.classList.remove('scrollLocked');\r\n            } else {\r\n                categorySelectList.classList.add('scrollLocked');\r\n                categorySelectHeading.classList.add('scrollLocked');\r\n            }\r\n        });\r\n    \r\n        // Toggle category select on mobile devices\r\n\r\n        const toggleCategorySelect = () => {\r\n            fcns.showOrHideEl(categorySelectList, 'category-select__category-list--hidden', 'category-select__category-list--visible', 'category-select__category-list--hiding');\r\n            fcns.showOrHideEl(categorySelectHeading, 'heading-2--hidden', 'heading-2--visible', 'heading-2--hiding');\r\n            fcns.showOrHideEl(categorySelectBackdrop, 'category-select__backdrop--hidden', 'category-select__backdrop--visible', 'category-select__backdrop--hiding');\r\n            fcns.switchClass(categorySelectMobileBtn, 'category-select__mobile-button--show', 'category-select__mobile-button--hide');\r\n    \r\n            if ([...categorySelectMobileBtn.classList].includes('category-select__mobile-button--show')) {\r\n                categorySelectMobileBtn.textContent = 'Zobrazit kategorie';\r\n            } else {\r\n                categorySelectMobileBtn.textContent = 'Skrýt kategorie';\r\n            }\r\n        }\r\n\r\n        categorySelectMobileBtn.addEventListener('click', toggleCategorySelect);\r\n        categorySelectBackdrop.addEventListener('click', toggleCategorySelect);\r\n    }\r\n});\r\n\r\n\r\n  ","import * as fcns from './functions';\r\nimport {formELs}  from './data';\r\n\r\nexport const postCartHandler = async ({ action, csrf, amount, productId }) => {\r\n    switch (action) {\r\n        case 'ADD':\r\n        case 'REMOVE':\r\n\r\n            // Create body object\r\n            const bodyObj = {\r\n                action: action,\r\n                amount: amount,\r\n                productId: productId\r\n            };\r\n\r\n            // Send request\r\n            return fetch('/kosik', {\r\n                method: 'POST',\r\n                headers: {\r\n                    'X-CSRF-Token': csrf,\r\n                    'Content-Type': 'application/json',\r\n                    'Accept': 'application/json'\r\n                },\r\n                body: JSON.stringify(bodyObj)\r\n            }).then(res => {\r\n                return Promise.all([res, res.json()]);\r\n            }).then(promises => {\r\n                const [ response, body ] = promises;\r\n                if (!(response.ok && response.status >= 200 && response.status < 300)) {\r\n\r\n                    throw new Error(body.msg);\r\n                }\r\n                const updatedCart = body.cart;                \r\n                return updatedCart;\r\n            }).catch(err => {\r\n                throw new Error(err);\r\n            });\r\n\r\n            break;\r\n        default: throw new Error('Non-existing cart action');\r\n    }\r\n}\r\n\r\nexport const orderSubmitHandler = e => {\r\n\r\n    ///// Validatings input values \r\n\r\n    const emailValue = fcns.validateInput(formELs.email);\r\n    const firstNameValue = fcns.validateInput(formELs.firstName);\r\n    const lastNameValue = fcns.validateInput(formELs.lastName);\r\n    const phoneValue = fcns.validateInput(formELs.phone);\r\n    const streetValue = fcns.validateInput(formELs.street);\r\n    const cityValue = fcns.validateInput(formELs.city);\r\n    const zipCodeValue = fcns.validateInput(formELs.zipCode);\r\n    const deliveryValue = fcns.validateInput(formELs.delivery);\r\n    const paymentValue = fcns.validateInput(formELs.payment);\r\n    // If ZAS is chosen for delivery, validating packetaId\r\n    const packetaIdValue = deliveryValue === 'ZAS' ? fcns.validateInput(formELs.packetaId) : '';\r\n\r\n    // If validation has failed (at least one element has class 'invalid'), returning\r\n    \r\n    if (document.querySelector('.invalid')) {\r\n        e.preventDefault();\r\n        return;\r\n    }\r\n    // Show spinner on submit button\r\n    const submitBtn = e.target.elements.order_submit;\r\n    const submitBtnText = submitBtn.textContent;\r\n    submitBtn.textContent = \"\";\r\n    submitBtn.classList.add('loading');\r\n\r\n    ///// Handle getting stripe session id and stripe redirection\r\n    if (paymentValue === 'CRD') {\r\n        e.preventDefault();\r\n\r\n        // Get form elements and stripe public key\r\n        const stripePublicKey = e.target.dataset.stripepublickey;\r\n        const formEls = e.target.elements;\r\n\r\n        // Initialize stripe\r\n        const stripe = Stripe(stripePublicKey);\r\n        \r\n        // Create new form data\r\n        const formData = new FormData();\r\n        formData.append('_csrf', formEls._csrf.value);\r\n        formData.append('packetaId', packetaIdValue);\r\n        formData.append('firstName', firstNameValue);\r\n        formData.append('lastName', lastNameValue);\r\n        formData.append('email', emailValue);\r\n        formData.append('phone', phoneValue);\r\n        formData.append('street', streetValue);\r\n        formData.append('city', cityValue);\r\n        formData.append('delivery', deliveryValue);\r\n        formData.append('payment', paymentValue);\r\n        formData.append('zipCode', zipCodeValue);\r\n\r\n        // Fetch POST /objednavka, expecting json\r\n        fetch('/objednavka', {\r\n            method: 'POST',\r\n            headers: {\r\n                'Accept': 'application/json'\r\n            },\r\n            body: formData\r\n        }).then(res => {\r\n            if (!res.ok) throw new Error('Nastala chyba na serveru.');\r\n            return res.json();\r\n        }).then(session => {\r\n            return stripe.redirectToCheckout({ sessionId: session.id });\r\n        }).then(result => {\r\n            if (result.error) {\r\n                fcns.createModal('Nastala chyba', 'Platba kartou se nezdařila. Prosím, zkuste jiný typ platby nebo mě kontaktujte na e-mailu keramikarosice@seznam.cz.', 'OK');\r\n            }\r\n        }).catch(err => {\r\n            fcns.createModal('Nastala chyba', 'Platba kartou se nezdařila. Prosím, zkuste jiný typ platby nebo mě kontaktujte na e-mailu keramikarosice@seznam.cz.', 'OK');\r\n        }).finally(() => {\r\n            submitBtn.textContent = submitBtnText;\r\n            submitBtn.classList.remove('loading');\r\n        })\r\n    }\r\n}\r\n\r\n\r\n","////\r\n//SUBMIT\r\n//\r\nconst orderForm = document.getElementById('order-form');\r\n\r\nexport const formELs = orderForm ? orderForm.elements : undefined;\r\n\r\nexport const RegexMap = orderForm ? new Map([\r\n    [formELs.email, /^[a-zA-Z0-9!#$_*?^{}~-]+(\\.[a-zA-Z0-9!#$_*?^{}~-]+)*@([a-zA-Z-]+\\.)+[a-zA-z]{2,}$/],\r\n    [formELs.firstName, /(.+){2,}/],\r\n    [formELs.lastName, /(.+){2,}/],\r\n    [formELs.phone, /^[0-9]{9}$/],\r\n    [formELs.street, /(.+){2,}/],\r\n    [formELs.city, /(.+){2,}/],\r\n    [formELs.zipCode, /[0-9]{5}/],\r\n    [formELs.delivery, /(ZAS|POS|OOD|ADR)/],\r\n    [formELs.payment, /(DOB|CRD|BTR)/],\r\n    [formELs.packetaId, /[0-9]{1,}/]\r\n]) : undefined;\r\n\r\n\r\nexport  const otherArgsMap = orderForm ? new Map([\r\n    // [input, [markedElId, removeWhiteSpace]]\r\n    [formELs.phone, [undefined, true]],\r\n    [formELs.zipCode, [undefined, true]],\r\n    [formELs.payment, ['order-payment']],\r\n    [formELs.delivery, ['order-delivery']],\r\n    [formELs.packetaId, ['order-delivery']]\r\n]) : undefined;","import { RegexMap, otherArgsMap }  from './data';\r\nimport state from './state';\r\nimport * as ajax from './ajax';\r\n\r\n///////////////////////////////////\r\n///// DEFINING FUNCTIONS\r\n\r\n/////\r\n// ready function to execute when DOM is loaded\r\n/////\r\nexport const ready = callbackFunc => {\r\n    if (document.readyState !== 'loading') {\r\n        // Document is already ready, call the callback directly\r\n        callbackFunc();\r\n    } else if (document.addEventListener) {\r\n        // All modern browsers to register DOMContentLoaded\r\n        document.addEventListener('DOMContentLoaded', callbackFunc);\r\n    } else {\r\n        // Old IE browsers\r\n        document.attachEvent('onreadystatechange', function() {\r\n            if (document.readyState === 'complete') {\r\n                callbackFunc();\r\n            }\r\n        });\r\n    }\r\n}\r\n  \r\n/////\r\n// Utilities functions\r\n/////\r\nexport const outerWidth = (el) => {\r\n    let width = el.offsetWidth;\r\n    const style = getComputedStyle(el);\r\n\r\n    width += parseInt(style.marginLeft) + parseInt(style.marginRight);\r\n    return width;\r\n}\r\n\r\n// Rendering the element or removing it from the screen smoothly - with animations\r\n// The element must have 3 CSS Classes available - hidden class, visible class, hiding class\r\n// Hidden class - display: none, no animation\r\n// Visible class - display: block (or whatever except none) and an animation of the element appearing on the page (sliding -in or so)\r\n// Hiding class - animation of the element disappearing\r\n// Element has only one of these classes at a time.\r\n// The hiding class is changed to hidden class after 'animationend' event on the element\r\nexport const showOrHideEl = (element, hiddenClass, visibleClass, hidingClass) => {\r\n    if([...element.classList].includes(hiddenClass)) {\r\n        element.classList.remove(hiddenClass);\r\n        element.classList.add(visibleClass);\r\n    } else {\r\n        element.classList.remove(visibleClass);\r\n        element.classList.add(hidingClass);\r\n\r\n        const animationEndHandler =  function(event) {\r\n        if(event.pseudoElement) {\r\n            element.addEventListener('animationend', animationEndHandler,  {\r\n            capture: false,\r\n            once: true,\r\n            passive: false\r\n            });\r\n            return;\r\n        }\r\n        element.classList.remove(hidingClass);\r\n        element.classList.add(hiddenClass);\r\n        }\r\n\r\n        element.addEventListener('animationend', animationEndHandler, {\r\n        capture: false,\r\n        once: true,\r\n        passive: false\r\n        });\r\n    }\r\n}\r\n\r\n// Switching between two classes, if an element has a class A, the class A is replaced for class B, if an element has a class B, the class B is replaced for the class A\r\nexport const switchClass = (el, classA, classB) => {\r\n    if ([...el.classList].includes(classA)) {\r\n        el.classList.remove(classA);\r\n        el.classList.add(classB);\r\n    } else {\r\n        el.classList.remove(classB);\r\n        el.classList.add(classA);\r\n    }\r\n}\r\n\r\n/////\r\n// Categories slider\r\n/////\r\nexport const moveCategoriesSlider = () => {\r\n    // Find #categoires-scrollable-container\r\n    const scrollableContainer = document.getElementById(\"categories-scrollable-container\");\r\n\r\n    // Find .categories-category\r\n    const categoryEl = document.querySelector('.categories-category');\r\n    // Find categoryEl width with margin\r\n    const moveInPixels = outerWidth(categoryEl);\r\n\r\n    // Conditionally scroll to left or to right\r\n    if (state.categoriesSlider.selectedArr === 'left') {\r\n        scrollableContainer.scrollBy({\r\n        top: 0,\r\n        left: -moveInPixels,\r\n        behavior: \"smooth\"\r\n        });\r\n    } else if (state.categoriesSlider.selectedArr === 'right') {\r\n        scrollableContainer.scrollBy({\r\n        top: 0,\r\n        left: moveInPixels,\r\n        behavior: \"smooth\"\r\n        });\r\n    }\r\n}\r\n\r\n/////\r\n// SUBMIT\r\n/////\r\n\r\n//// Managing the disabled state\r\nexport const refreshSubmitBtn = (agreeGDPR, agreeConditions, submitToCartBtn)  => {\r\n    \r\n    // If both inputs are checked, disabled class on the submit button is removed\r\n   if (agreeGDPR.checked && agreeConditions.checked) {\r\n       \r\n       submitToCartBtn.classList.remove('disabled');\r\n       submitToCartBtn.removeAttribute('disabled');\r\n       \r\n    } else {\r\n        \r\n        submitToCartBtn.classList.add('disabled');\r\n        submitToCartBtn.setAttribute('disabled', '');\r\n   }\r\n}\r\nexport function validateInput(input) {\r\n\r\n    // Getting regex for the current input\r\n   const inputRegExp = RegexMap.get(input);\r\n    if(!inputRegExp) {\r\n        return;\r\n    }\r\n\r\n    // Getting other arguments, if otherArgsMap contains them for current input\r\n    let markedElId;\r\n    let removeWhiteSpace;\r\n    if (otherArgsMap.get(input)) {\r\n        [markedElId, removeWhiteSpace] = otherArgsMap.get(input);\r\n    }\r\n    \r\n    // Getting input value, if specified, removing all single space characters (f.e in the case of zipcode)\r\n    let inputValue;\r\n    if (removeWhiteSpace) {\r\n        inputValue = input.value.trim().replace(/\\s/g, \"\");\r\n    } else {\r\n        inputValue = input.value.trim();\r\n    }\r\n\r\n    \r\n    // Getting element, on which the 'invalid' class is added in validation fail cases\r\n    let markedEl;\r\n    if (markedElId) {\r\n        markedEl = document.getElementById(markedElId);\r\n    } else {\r\n        markedEl = input;\r\n    }\r\n\r\n    // If input value doesn´t match the regular expression, validation 'fails' - the invalid class is added on markedEl, new Error is thrown\r\n    if(!inputRegExp.test(inputValue)) {\r\n        markedEl.classList.add('invalid');\r\n    } else {\r\n        markedEl.classList.remove('invalid');\r\n    }\r\n\r\n    return inputValue;\r\n}\r\n/////\r\n// MODAL\r\n/////\r\nexport const createModal = (text, subText, buttonText) => {\r\n    const modal = document.createElement('div');\r\n    const body = document.body;\r\n\r\n    modal.classList.add('modal');\r\n    modal.innerHTML = `<div class=\"modal__backdrop\"></div>\r\n    <div class=\"modal__window\">\r\n        <div class=\"modal__text\">${text}</div>\r\n        <div class=\"modal__subtext\">${subText}</div>\r\n        <button class=\"modal__button\">${buttonText}</button>\r\n        <div class=\"close-button\"></div>\r\n    </div>`;\r\n   \r\n    body.appendChild(modal);\r\n\r\n    const modalButton = modal.querySelector('.modal__button');\r\n    const modalCloseButton = modal.querySelector('.close-button');\r\n\r\n    modalButton.addEventListener('click', removeModal.bind(this, modal));\r\n    modalCloseButton.addEventListener('click', removeModal.bind(this, modal))\r\n}\r\n\r\nexport const removeModal = modal => {\r\n    modal.parentElement.removeChild(modal);\r\n}\r\n/////\r\n// CART-HINT\r\n/////\r\nexport const removeCartHint = cartHint => {\r\n    cartHint.parentElement.removeChild(cartHint);\r\n}\r\nexport const createCartHint = (state, text) => {\r\n\r\n    // Removing current cart hint if any\r\n    const currentCartHint = document.querySelector('.cart-hint');\r\n\r\n    if(currentCartHint) {\r\n        currentCartHint.parentElement.removeChild(currentCartHint);\r\n    }\r\n\r\n    // State = 'success' | 'failed'\r\n    if(state !== 'success' && state !== 'failed') {\r\n        return;\r\n    }\r\n\r\n    let cartHint = document.createElement('div');\r\n    const body = document.body;\r\n\r\n    cartHint.classList.add('cart-hint');\r\n    cartHint.classList.add('cart-hint--visible');\r\n    cartHint.classList.add(`cart-hint--${state}`);\r\n    cartHint.innerHTML = `<div class=\"cart-hint__text\">\r\n        ${text}\r\n        </div>\r\n        <div class=\"cart-hint__symbol cart-hint__symbol--${state}\">\r\n\r\n        </div>\r\n        <button class=\"close-button\">\r\n\r\n        </button>\r\n    `;\r\n\r\n    body.appendChild(cartHint);\r\n\r\n    const cartHintCloseButton = cartHint.querySelector('button');\r\n    cartHintCloseButton.addEventListener('click', removeCartHint.bind(this, cartHint));\r\n\r\n    // Cart hint gradually dissapears after 5 seconds\r\n    setTimeout(() => {\r\n        if(cartHint) {\r\n            cartHint.addEventListener('animationend', () => {\r\n                removeCartHint(cartHint);\r\n            })\r\n            switchClass(cartHint, 'cart-hint--visible', 'cart-hint--hiding');\r\n        }\r\n    }, 5000)\r\n}\r\n/////\r\n//CART\r\n/////\r\nexport const addToCart = (postCartData) => {\r\n    \r\n    return ajax.postCartHandler(postCartData)\r\n    .then((updatedCart) => {\r\n        createCartHint('success', `Produkt byl úspěšně přidán do košíku`);         \r\n        return updatedCart;           \r\n    }).catch(err => {\r\n        console.log(err);\r\n        createCartHint('failed', `Nastala chyba, produkt nebyl přidán do košíku`);\r\n    });\r\n\r\n};\r\nexport const removeFromCart = (postCartData) => {\r\n\r\n    return ajax.postCartHandler(postCartData)\r\n    .then((updatedCart) => {\r\n        createCartHint('success', `Produkt byl úspěšně odebrán z košíku`);         \r\n        return updatedCart;           \r\n    }).catch(err => {\r\n        createCartHint('failed', `Nastala chyba, produkt nebyl odebrán z košíku`);\r\n    });\r\n\r\n}\r\nexport const updateCartItem = (cartItem, updatedCart) => {\r\n\r\n    const cartItemObj = updatedCart.items.find(item => {\r\n        return item.product._id === cartItem.dataset.productid;\r\n        \r\n    })\r\n   \r\n    const amountEl = cartItem.querySelector('.cart-item__amount-box__amount');\r\n    const priceEl = cartItem.querySelector('.cart-item__price');\r\n\r\n    if(!cartItemObj) {\r\n\r\n        cartItem.parentElement.removeChild(cartItem);\r\n\r\n    } else {\r\n\r\n        amountEl.textContent = `${cartItemObj.amount}ks`;\r\n        priceEl.textContent = +cartItemObj.product.price * cartItemObj.amount + 'Kč';\r\n\r\n    }\r\n\r\n    updateTotalPrice(updatedCart);\r\n    updateCartPage();\r\n    updateCartIcon(updatedCart);\r\n}\r\n\r\nexport const updateCartPage = () => {\r\n    \r\n    const cartItem = document.querySelector('.cart-item');\r\n\r\n    const cartOrder = document.getElementById('cart-order');\r\n    const emptyCartContent = document.querySelector('.cart__cart-content__empty');\r\n    const summary = document.querySelector('.cart__cart-content__summary');\r\n    const dph = document.querySelector('.cart__cart-content__dph');\r\n    const button = document.getElementById('to-order');\r\n\r\n    if(!cartItem) {\r\n\r\n        cartOrder.style.display = 'none';\r\n        summary.style.display  = 'none';\r\n        emptyCartContent.style.display = 'block';\r\n        dph.style.display = 'none';\r\n        button.classList.remove('hidden');\r\n        button.classList.add('hidden');\r\n\r\n    } else {\r\n\r\n        cartOrder.style.display = 'flex';\r\n        summary.style.display  = 'flex';\r\n        emptyCartContent.style.display = 'none';\r\n        dph.style.display = 'block';\r\n        button.classList.remove('hidden');\r\n    }\r\n}\r\n\r\nexport const updateTotalPrice  = (updatedCart) => {\r\n    \r\n    const priceEl = document.querySelector(\".cart__cart-content__summary__price\");\r\n\r\n    priceEl.textContent = `${updatedCart.total}Kč`;\r\n\r\n}\r\n/////\r\n//HEADER\r\n/////\r\nexport const updateCartIcon = (updatedCart) => {\r\n    const cartAmountEl = document.querySelector('.header__cart-amount');\r\n    const cartAmount = updatedCart.items.reduce((prevValue, curValue, id) => {\r\n        return prevValue + updatedCart.items[id].amount;\r\n    }, 0)\r\n    if(cartAmount <= 0) {\r\n        cartAmountEl.style.display = 'none';\r\n    } else {\r\n        cartAmountEl.style.display = 'flex';\r\n    }\r\n    cartAmountEl.textContent = cartAmount;\r\n}\r\n\r\nexport const easterTime = (frogAudio, e) => {\r\n    const string = e.target.value;\r\n    const showEaster = () => {\r\n        const frog = document.createElement('img');\r\n        frog.style.width = '50px';\r\n        frog.style.height = '50px';\r\n        frog.style.position = 'absolute';\r\n        frog.style.top = '50%';\r\n        frog.style.left = '50%';\r\n        frog.style.objectFit = 'cover';\r\n        frog.setAttribute('src', '/img/frog.png');\r\n        frog.style.animation = 'easterAnimation 2.8s linear';\r\n        document.querySelector('body').prepend(frog);\r\n        setTimeout(() => {\r\n            const audio = frogAudio.cloneNode();\r\n            audio.play();                \r\n        }, 100);\r\n        setTimeout(() => {\r\n            frog.parentElement.removeChild(frog);\r\n        }, 2800);\r\n    }\r\n    if (string === 'boomer' || string === 'Boomer') {\r\n        showEaster();\r\n    }\r\n    if (string === 'BOOMER') {\r\n        const easterInterval = setInterval(() => {\r\n            showEaster();\r\n        }, 400);\r\n        setTimeout(() => {\r\n            clearInterval(easterInterval);\r\n        }, 2000);\r\n    }\r\n}","///////////////////////////////////\r\n///// DEFINE STATE\r\nexport default {\r\n    categoriesSlider: {\r\n        selectedArr: null // 'left' || 'right'\r\n    },\r\n    hamburgerBtn: null\r\n}","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tif(__webpack_module_cache__[moduleId]) {\n\t\treturn __webpack_module_cache__[moduleId].exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// startup\n// Load entry module\n__webpack_require__(\"./src/js/index.js\");\n// This entry module used 'exports' so it can't be inlined\n"],"sourceRoot":""}