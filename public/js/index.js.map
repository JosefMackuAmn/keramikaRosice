{"version":3,"sources":["webpack://keramika-rosice/./src/js/index.js","webpack://keramika-rosice/./src/js/utils/ajax.js","webpack://keramika-rosice/./src/js/utils/data.js","webpack://keramika-rosice/./src/js/utils/functions.js","webpack://keramika-rosice/./src/js/utils/state.js","webpack://keramika-rosice/webpack/bootstrap","webpack://keramika-rosice/webpack/runtime/define property getters","webpack://keramika-rosice/webpack/runtime/hasOwnProperty shorthand","webpack://keramika-rosice/webpack/runtime/make namespace object","webpack://keramika-rosice/webpack/startup"],"names":[],"mappings":"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AEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACO;AACP;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACO;AACP;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,QAAQ,wEAAkC;AAC1C;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK,UAAU,wEAAkC;AACjD;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;;AAEA;AACO;;AAEP;AACA;;AAEA;AACA;;AAEA,IAAI;;AAEJ;AACA;;AAEA;AACA;AACO;;AAEP;AACA,uBAAuB,+CAAY;AACnC;AACA;AACA;;AAEA;AACA;AACA;AACA,QAAQ,mDAAgB;AACxB,yCAAyC,mDAAgB;AACzD;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;;AAGA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACO;AACP;AACA;;AAEA;AACA;AACA;AACA,mCAAmC,KAAK;AACxC,sCAAsC,QAAQ;AAC9C,wCAAwC,WAAW;AACnD;AACA;;AAEA;;AAEA;AACA;;AAEA,2DAA2D,SAAI;AAC/D,gEAAgE,SAAI;AACpE;;AAEO;AACP;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACO;;AAEP;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,yCAAyC,MAAM;AAC/C;AACA,MAAM;AACN;AACA,uDAAuD,MAAM;;AAE7D;AACA;;AAEA;;AAEA;;AAEA;AACA,sEAAsE,SAAI;;AAE1E;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACO;;AAEP,WAAW,kDAAoB;AAC/B;AACA,0E;AACA,2B;AACA,KAAK;AACL;AACA,KAAK;;AAEL;AACO;;AAEP,WAAW,kDAAoB;AAC/B;AACA,0E;AACA,2B;AACA,KAAK;AACL;AACA,KAAK;;AAEL;AACO;;AAEP;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;;AAEA;;AAEA,KAAK;;AAEL,kCAAkC,mBAAmB;AACrD;;AAEA;;AAEA;AACA;AACA;;AAEO;;AAEP;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEO;;AAEP;;AAEA,6BAA6B,kBAAkB;;AAE/C;;;;;;;;;;;;;;;;;;;;AChVA;AACA;AACA,iEAAe;AACf;AACA;AACA,KAAK;AACL;AACA,C;;;;;;UCPA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;;WCrBA;WACA;WACA;WACA;WACA,wCAAwC,yCAAyC;WACjF;WACA;WACA,E;;;;;WCPA,sF;;;;;WCAA;WACA;WACA;WACA,sDAAsD,kBAAkB;WACxE;WACA,+CAA+C,cAAc;WAC7D,E;;;;UCNA;UACA;UACA;UACA","file":"index.js","sourcesContent":["import state from './utils/state';\nimport * as fcns from './utils/functions';\nimport * as ajax from './utils/ajax';\nimport {formELs}  from './utils/data';\n\n  \n///////////////////////////////////\n///// CALLING READY FUNCTION\nfcns.ready(() => {\n\n    /////\n    // SHOW MODAL\n    /////\n\n    const params = new URLSearchParams(window.location.search);\n    \n    if (params.has('payment')) {\n\n        const payment = params.get('payment');\n\n        if (payment === 'success') {\n            fcns.createModal('Úspěch', 'Objednávka proběhla úspěšně', 'OK')\n        } else if (payment === 'canceled') {\n            fcns.createModal('Storno', 'Platba byla přerušena, ale prodejce byl o Vaší objednávce informován a vyřeší to s Vámi osobní domluvou.', 'OK')\n        }\n\n        if(payment === 'BTR') {\n\n            if(params.has('success') && params.has('mailSent')) {\n\n                const success = params.get('success');\n                const mailSent = params.get('mailSent');\n\n                if(success === 'true' && mailSent === 'true') {\n                    fcns.createModal('Odesláno', 'Objednávka byla odeslána. <em> Byl vám zaslán mail, prosím, postupujte podle pokynů v něm. </em>', 'OK', true)\n                }\n\n                if(success === 'true' && mailSent === 'false') {\n                    fcns.createModal('Chyba', '<em> Nepodařil se odeslat mail s informacemi k platbě, prosím, kontaktujte mě na adrese keramikarosice@seznam.cz </em>', 'OK', true)\n                }\n\n                if(success === 'false' && mailSent === 'true') {\n                    fcns.createModal('Chyba', 'Nastala chyba, objednávka nebyla odeslána.', 'OK')\n                }\n\n                if(success === 'false' && mailSent === 'false') {\n                    fcns.createModal('Chyba', 'Nastala chyba, objednávka nebyla odeslána. ', 'OK')\n                }\n\n            }\n            \n        }\n\n        if(payment === 'DOB') {\n            \n            if(params.has('success') && params.has('mailSent')) {\n\n                const success = params.get('success');\n                const mailSent = params.get('mailSent');\n\n                if(success === 'true' && mailSent === 'true') {\n                    fcns.createModal('Úspěch', 'Objednávka proběhla úspěšně', 'OK')\n                }\n\n                if(success === 'true' && mailSent === 'false') {\n                    fcns.createModal('Úspěch', 'Objednávka proběhla úspěšně', 'OK')\n                }\n\n                if(success === 'false' && mailSent === 'true') {\n                    fcns.createModal('Chyba', 'Nastala chyba, objednávka nebyla odeslána', 'OK')\n                }\n\n                if(success === 'false' && mailSent === 'false') {\n                    fcns.createModal('Chyba', 'Nastala chyba, objednávka nebyla odeslána.', 'OK')\n                }\n            }\n            \n        }\n    }\n\n    /////\n    // MENU\n    /////\n\n    // Select hamburger button and attach click listener\n    const hamburgerBtn = state.hamburgerBtn = document.querySelector(\"#hamburger-btn\");\n    const headerList = hamburgerBtn.nextElementSibling;\n    const headerBackDrop = document.querySelector('.header__backdrop');\n\n    const toggleHeader = (e) => {\n        e.stopPropagation();\n\n        if(![hamburgerBtn.classList].includes('header__nav-button--hiding')) {\n\n            fcns.showOrHideEl(hamburgerBtn, 'header__nav-button--show', 'header__nav-button--hide', 'header__nav-button--hiding');\n            fcns.showOrHideEl(headerList, 'header__nav-list--hidden', 'header__nav-list--visible', 'header__nav-list--hiding');\n            fcns.showOrHideEl(headerBackDrop, 'header__backdrop--hidden', 'header__backdrop--visible', 'header__backdrop--hiding');\n\n            for (const listItem of headerList.children) {\n                fcns.showOrHideEl(listItem, 'header__nav-item--hidden', 'header__nav-item--visible', 'header__nav-item--hiding');\n            }\n        }\n    }\n    headerBackDrop.addEventListener('click', toggleHeader);\n    hamburgerBtn.addEventListener(\"click\", toggleHeader);\n\n    /////\n    // CATEGORIES SLIDER\n    /////\n\n    // Try to find #categories-slider\n    const categoriesSlider = document.getElementById(\"categories-slider\");\n    // If #categories-slider found\n    if (categoriesSlider) {\n        // Find arrows\n        const arrowLeft = document.getElementById(\"arrow-left\");\n        const arrowRight = document.getElementById(\"arrow-right\");\n        \n        // Attach click listener to arrows\n        arrowLeft.addEventListener(\"click\", () => {\n            state.categoriesSlider.selectedArr = 'left';\n            fcns.moveCategoriesSlider();\n        });\n        arrowRight.addEventListener(\"click\", () => {\n            state.categoriesSlider.selectedArr = 'right';\n            fcns.moveCategoriesSlider();\n        });        \n    }\n\n    /////\n    // CART\n    /////\n\n    ///// TO ORDER BUTTON\n\n    const toOrderBtn = document.getElementById('to-order');\n    if(toOrderBtn) {\n        const orderSection = document.getElementById('cart-order');\n\n        toOrderBtn.addEventListener('click', () => {\n            orderSection.scrollIntoView({behavior: 'smooth'});\n        })\n    }\n    \n    /////\n    // CART & ORDER\n    /////\n\n    ///// Submit button event listener\n    const orderForm = document.getElementById('order-form');\n    if (orderForm) {\n        orderForm.addEventListener('submit', ajax.orderSubmitHandler);\n\n        fcns.updateCartPage();\n    }\n\n\n    // Agreement checkbox event listeners \n    \n    const agreeGDPR = document.getElementById('agree-gdpr');\n    const agreeConditions = document.getElementById('agree-conditions');\n    const submitToCartBtn = document.getElementById('submit-order');\n    if(orderForm) {\n        agreeGDPR.addEventListener('input', () => {\n            fcns.refreshSubmitBtn(agreeGDPR, agreeConditions, submitToCartBtn);\n        })\n        agreeConditions.addEventListener('input', () => {\n            fcns.refreshSubmitBtn(agreeGDPR, agreeConditions, submitToCartBtn);\n        });\n    }\n\n    ///// Input Validation\n    if(orderForm) {\n        for (const input of formELs) {\n            input.addEventListener('input', fcns.validateInput.bind(this, input));\n        }\n    }\n\n    //// Managing cart items\n    const cartItems = document.querySelectorAll('.cart-item');\n\n    if(orderForm) {\n\n        for(const cartItem of cartItems) {\n\n            const addButton = cartItem.querySelector('.cart-item__amount-box__btn--add');\n            const removeButton = cartItem.querySelector('.cart-item__amount-box__btn--remove');\n            const removeAllButton = cartItem.querySelector('.close-button');\n\n            addButton.addEventListener('click', async () => {\n\n                const postCartData = {\n                    action: 'ADD',\n                    productId: cartItem.dataset.productid,\n                    csrf: cartItem.dataset.csrf,\n                    amount: 1\n                }\n                \n                fcns.addToCart(postCartData).then((updatedCart) => {\n                    fcns.updateCartItem(cartItem, updatedCart);\n                });\n            });\n            removeButton.addEventListener('click', () => {\n\n                const postCartData = {\n                    action: 'REMOVE',\n                    productId: cartItem.dataset.productid,\n                    csrf: cartItem.dataset.csrf,\n                    amount: 1\n                }\n                \n                fcns.removeFromCart(postCartData).then((updatedCart) => {\n                    fcns.updateCartItem(cartItem, updatedCart);\n\n                    \n                });\n            })\n            removeAllButton.addEventListener('click', () => {\n\n                const postCartData = {\n                    action: 'REMOVE',\n                    productId: cartItem.dataset.productid,\n                    csrf: cartItem.dataset.csrf,\n                    amount: false\n                }\n\n                fcns.removeFromCart(postCartData).then( (updatedCart) => {\n                    fcns.updateCartItem(cartItem, updatedCart);\n                })\n\n            })\n        }\n    }\n    \n\n    /////\n    // E-SHOP\n    /////\n\n    ///// SUBMIT TO CART BUTTON\n    const eshopProducts = document.querySelector('.eshop__products');\n\n    if (eshopProducts) {\n        const submitBtns = eshopProducts.querySelectorAll('.post-order-btn');\n\n        for (const btn of submitBtns) {\n            btn.addEventListener('click', async () => {\n\n                // Create object with action ('ADD' || 'REMOVE'), productId, csrf, amount\n                const postCartData = {\n                    action: 'ADD',\n                    productId: btn.dataset.productid,\n                    csrf: btn.dataset.csrf,\n                    amount: btn.parentElement.querySelector('input').value\n                }\n\n                fcns.addToCart(postCartData);\n            })\n        }\n    }\n\n    ///// CATEGORY SELECT\n    const categorySelect = document.querySelector('.category-select');\n\n    if (categorySelect) {\n        \n       \n        const categorySelectButtons = categorySelect.querySelectorAll('.category-select__button');\n\n        for (const btn of categorySelectButtons) {\n            const list = btn.parentElement.querySelector('.category-select__subcategory-list');\n        \n            btn.addEventListener('click', () => {\n                // changes the button style\n                fcns.switchClass(btn, 'category-select__button--show', 'category-select__button--hide');\n                // shows or removes the subcategory list\n                fcns.showOrHideEl(list, 'category-select__subcategory-list--hidden', 'category-select__subcategory-list--visible', 'category-select__subcategory-list--hiding');\n            });\n        }\n\n        ///// PRODUCT MODAL\n        const products = document.querySelectorAll('.product');\n\n        for (const prod of products) {\n            const btnShowProdModal = prod.querySelector('.product__info .to-cart-button');\n            const btnCloseProdModal = prod.querySelector('.product__modal__close-button');\n            const modal = prod.querySelector('.product__modal');\n            const btnAddToCart = modal.querySelector('.to-cart-button');\n            const input = modal.querySelector('input');\n            \n            btnShowProdModal.addEventListener('click', () => {\n                // Shows product modal\n                fcns.switchClass(modal, 'product__modal--toggled', 'product__modal--hidden');\n            });\n            btnCloseProdModal.addEventListener('click', () => {\n                // Hides product modal\n                fcns.switchClass(modal, 'product__modal--toggled', 'product__modal--hidden');\n            });   \n            btnAddToCart.addEventListener('click', () => {\n                // Hides product modal\n                fcns.switchClass(modal, 'product__modal--toggled', 'product__modal--hidden');\n            })\n            input.addEventListener('input', () => {\n\n               if(!(/^[0-9]{1,}$/.test(input.value))) {\n                input.classList.add('invalid');\n                btnAddToCart.setAttribute('disabled', '');\n               } else {\n                   input.classList.remove('invalid');\n                   btnAddToCart.removeAttribute('disabled', '');\n               }\n\n            })         \n        }\n\n        ///// MOBILE CATEGORY SELECT\n        const categorySelectMobileBtn = categorySelect.querySelector('button');\n\n        const categorySelectList = categorySelectMobileBtn.parentElement.querySelector('.category-select__category-list');\n        const categorySelectHeading = categorySelectMobileBtn.parentElement.querySelector('.heading-2');\n        const categorySelectBackdrop = document.querySelector('.category-select__backdrop');\n        \n        const footer = document.querySelector('footer');\n    \n        window.addEventListener('scroll', () => {\n            const footerY = footer.getBoundingClientRect().y;\n            const btnY = categorySelectMobileBtn.getBoundingClientRect().y;\n    \n            if (footerY >= btnY) {\n                categorySelectList.classList.remove('scrollLocked');\n                categorySelectHeading.classList.remove('scrollLocked');\n            } else {\n                categorySelectList.classList.add('scrollLocked');\n                categorySelectHeading.classList.add('scrollLocked');\n            }\n        });\n    \n        // Toggle category select on mobile devices\n\n        const toggleCategorySelect = () => {\n            fcns.showOrHideEl(categorySelectList, 'category-select__category-list--hidden', 'category-select__category-list--visible', 'category-select__category-list--hiding');\n            fcns.showOrHideEl(categorySelectHeading, 'heading-2--hidden', 'heading-2--visible', 'heading-2--hiding');\n            fcns.showOrHideEl(categorySelectBackdrop, 'category-select__backdrop--hidden', 'category-select__backdrop--visible', 'category-select__backdrop--hiding');\n            fcns.switchClass(categorySelectMobileBtn, 'category-select__mobile-button--show', 'category-select__mobile-button--hide');\n    \n            if ([...categorySelectMobileBtn.classList].includes('category-select__mobile-button--show')) {\n                categorySelectMobileBtn.textContent = 'Zobrazit kategorie';\n            } else {\n                categorySelectMobileBtn.textContent = 'Skrýt kategorie';\n            }\n        }\n\n        categorySelectMobileBtn.addEventListener('click', toggleCategorySelect);\n        categorySelectBackdrop.addEventListener('click', toggleCategorySelect);\n    }\n});\n\n\n  ","import * as fcns from './functions';\nimport {formELs}  from './data';\n\nexport const postCartHandler = async ({ action, csrf, amount, productId }) => {\n    switch (action) {\n        case 'ADD':\n        case 'REMOVE':\n\n            // Create body object\n            const bodyObj = {\n                action: action,\n                amount: amount,\n                productId: productId\n            };\n\n            // Send request\n            return fetch('/kosik', {\n                method: 'POST',\n                headers: {\n                    'X-CSRF-Token': csrf,\n                    'Content-Type': 'application/json',\n                    'Accept': 'application/json'\n                },\n                body: JSON.stringify(bodyObj)\n            }).then(res => {\n                return Promise.all([res.clone(), res.json()]);\n            }).then(promises => {\n                const [ response, body ] = promises;\n                if (!(response.ok && response.status >= 200 && response.status < 300)) {\n\n                    throw new Error(body.msg);\n                }\n                const updatedCart = body.cart;                \n                return updatedCart;\n            }).catch(err => {\n                throw new Error(err);\n            });\n\n            break;\n        default: throw new Error('Non-existing cart action');\n    }\n}\n\nexport const orderSubmitHandler = e => {\n\n    ///// Validatings input values \n\n    const emailValue = fcns.validateInput(formELs.email);\n    const firstNameValue = fcns.validateInput(formELs.firstName);\n    const lastNameValue = fcns.validateInput(formELs.lastName);\n    const phoneValue = fcns.validateInput(formELs.phone);\n    const streetValue = fcns.validateInput(formELs.street);\n    const cityValue = fcns.validateInput(formELs.city);\n    const zipCodeValue = fcns.validateInput(formELs.zipCode);\n    const deliveryValue = fcns.validateInput(formELs.delivery);\n    const paymentValue = fcns.validateInput(formELs.payment);\n\n    // If validation has failed (at least one element has class 'invalid'), returning\n    \n    if (document.querySelector('.invalid')) {\n        e.preventDefault();\n        return;\n    }\n       \n    // Show spinner on submit button\n    const submitBtn = e.target.elements.order_submit;\n    const submitBtnText = submitBtn.textContent;\n    submitBtn.textContent = \"\";\n    submitBtn.classList.add('loading');\n\n    ///// Handle getting stripe session id and stripe redirection\n    if (paymentValue === 'CRD') {\n        e.preventDefault();\n\n        // Get form elements and stripe public key\n        const stripePublicKey = e.target.dataset.stripepublickey;\n        const formEls = e.target.elements;\n\n        // Initialize stripe\n        const stripe = Stripe(stripePublicKey);\n        \n        // Create new form data\n        const formData = new FormData();\n        formData.append('_csrf', formEls._csrf.value);\n        formData.append('firstName', firstNameValue);\n        formData.append('lastName', lastNameValue);\n        formData.append('email', emailValue);\n        formData.append('phone', phoneValue);\n        formData.append('street', streetValue);\n        formData.append('city', cityValue);\n        formData.append('delivery', deliveryValue);\n        formData.append('payment', paymentValue);\n        formData.append('zipCode', zipCodeValue);\n\n        // Fetch POST /objednavka, expecting json\n        fetch('/objednavka', {\n            method: 'POST',\n            body: formData\n        }).then(res => {\n            return res.json();\n        }).then(session => {\n            return {\n                error: 'error'\n            }\n            //return stripe.redirectToCheckout({ sessionId: session.id });\n        }).then(result => {\n            if (result.error) {\n                fcns.createModal('Nastala chyba', 'Platba se nezdařila, prosím kontaktujte mě na e-mailu keramikarosice@seznam.cz', 'OK');\n            }\n        }).catch(err => {\n            fcns.createModal('Nastala chyba', 'Objednávka se nezdařila, prosím kontaktujte mě na e-mailu keramikarosice@seznam.cz', 'OK');\n        }).finally(() => {\n            submitBtn.textContent = submitBtnText;\n            submitBtn.classList.remove('loading');\n        })\n    }\n}\n\n\n","////\n//SUBMIT\n//\nconst orderForm = document.getElementById('order-form');\n\nexport const formELs = orderForm ? orderForm.elements : undefined;\n\nexport const RegexMap = orderForm ? new Map([\n    [formELs.email, /^[a-zA-Z0-9!#$_*?^{}~-]+(\\.[a-zA-Z0-9!#$_*?^{}~-]+)*@([a-zA-Z-]+\\.)+[a-zA-z]{2,}$/],\n    [formELs.firstName, /(.+){2,}/],\n    [formELs.lastName, /(.+){2,}/],\n    [formELs.phone, /^[0-9]{9}$/],\n    [formELs.street, /(.+){2,}/],\n    [formELs.city, /(.+){2,}/],\n    [formELs.zipCode, /[0-9]{5}/],\n    [formELs.delivery, /(ZAS|POS|OOD)/],\n    [formELs.payment, /(DOB|CRD|BTR)/]\n]\n) : undefined;\n\n\n\nexport  const otherArgsMap = orderForm ? new Map([\n    // [input, [markedElId, removeWhiteSpace]]\n    [formELs.phone, [undefined, true]],\n    [formELs.zipCode, [undefined, true]],\n    [formELs.payment, ['order-payment']],\n    [formELs.delivery, ['order-delivery']]\n]) : undefined;","import {RegexMap, otherArgsMap}  from './data';\nimport state from './state';\nimport * as ajax from './ajax';\n\n///////////////////////////////////\n///// DEFINING FUNCTIONS\n\n/////\n// ready function to execute when DOM is loaded\n/////\nexport const ready = callbackFunc => {\n    if (document.readyState !== 'loading') {\n        // Document is already ready, call the callback directly\n        callbackFunc();\n    } else if (document.addEventListener) {\n        // All modern browsers to register DOMContentLoaded\n        document.addEventListener('DOMContentLoaded', callbackFunc);\n    } else {\n        // Old IE browsers\n        document.attachEvent('onreadystatechange', function() {\n            if (document.readyState === 'complete') {\n                callbackFunc();\n            }\n        });\n    }\n}\n  \n/////\n// Utilities functions\n/////\nexport const outerWidth = (el) => {\n    let width = el.offsetWidth;\n    const style = getComputedStyle(el);\n\n    width += parseInt(style.marginLeft) + parseInt(style.marginRight);\n    return width;\n}\n\n// Rendering the element or removing it from the screen smoothly - with animations\n// The element must have 3 CSS Classes available - hidden class, visible class, hiding class\n// Hidden class - display: none, no animation\n// Visible class - display: block (or whatever except none) and an animation of the element appearing on the page (sliding -in or so)\n// Hiding class - animation of the element disappearing\n// Element has only one of these classes at a time.\n// The hiding class is changed to hidden class after 'animationend' event on the element\nexport const showOrHideEl = (element, hiddenClass, visibleClass, hidingClass) => {\n    if([...element.classList].includes(hiddenClass)) {\n        element.classList.remove(hiddenClass);\n        element.classList.add(visibleClass);\n    } else {\n        element.classList.remove(visibleClass);\n        element.classList.add(hidingClass);\n\n        const animationEndHandler =  function(event) {\n        if(event.pseudoElement) {\n            element.addEventListener('animationend', animationEndHandler,  {\n            capture: false,\n            once: true,\n            passive: false\n            });\n            return;\n        }\n        element.classList.remove(hidingClass);\n        element.classList.add(hiddenClass);\n        }\n\n        element.addEventListener('animationend', animationEndHandler, {\n        capture: false,\n        once: true,\n        passive: false\n        });\n    }\n}\n\n// Switching between two classes, if an element has a class A, the class A is replaced for class B, if an element has a class B, the class B is replaced for the class A\nexport const switchClass = (el, classA, classB) => {\n    if ([...el.classList].includes(classA)) {\n        el.classList.remove(classA);\n        el.classList.add(classB);\n    } else {\n        el.classList.remove(classB);\n        el.classList.add(classA);\n    }\n}\n\n/////\n// Categories slider\n/////\nexport const moveCategoriesSlider = () => {\n    // Find #categoires-scrollable-container\n    const scrollableContainer = document.getElementById(\"categories-scrollable-container\");\n\n    // Find .categories-category\n    const categoryEl = document.querySelector('.categories-category');\n    // Find categoryEl width with margin\n    const moveInPixels = outerWidth(categoryEl);\n\n    // Conditionally scroll to left or to right\n    if (state.categoriesSlider.selectedArr === 'left') {\n        scrollableContainer.scrollBy({\n        top: 0,\n        left: -moveInPixels,\n        behavior: \"smooth\"\n        });\n    } else if (state.categoriesSlider.selectedArr === 'right') {\n        scrollableContainer.scrollBy({\n        top: 0,\n        left: moveInPixels,\n        behavior: \"smooth\"\n        });\n    }\n}\n\n/////\n// SUBMIT\n/////\n\n//// Managing the disabled state\nexport const refreshSubmitBtn = (agreeGDPR, agreeConditions, submitToCartBtn)  => {\n    \n    // If both inputs are checked, disabled class on the submit button is removed\n   if (agreeGDPR.checked && agreeConditions.checked) {\n\n       submitToCartBtn.classList.remove('disabled');\n       submitToCartBtn.removeAttribute('disabled');\n\n   } else {\n\n    submitToCartBtn.classList.add('disabled');\n    submitToCartBtn.setAttribute('disabled', '');\n\n   }\n}\nexport function validateInput(input) {\n\n    // Getting regex for the current input\n   const inputRegExp = RegexMap.get(input);\n    if(!inputRegExp) {\n        return;\n    }\n\n    // Getting other arguments, if otherArgsMap contains them for current input\n    let markedElId;\n    let removeWhiteSpace;\n    if (otherArgsMap.get(input)) {\n        [markedElId, removeWhiteSpace] = otherArgsMap.get(input);\n    }\n    \n    // Getting input value, if specified, removing all single space characters (f.e in the case of zipcode)\n    let inputValue;\n    if (removeWhiteSpace) {\n        inputValue = input.value.trim().replace(/\\s/g, \"\");\n    } else {\n        inputValue = input.value.trim();\n    }\n\n    \n    // Getting element, on which the 'invalid' class is added in validation fail cases\n    let markedEl;\n    if (markedElId) {\n        markedEl = document.getElementById(markedElId);\n    } else {\n        markedEl = input;\n    }\n\n    // If input value doesn´t match the regular expression, validation 'fails' - the invalid class is added on markedEl, new Error is thrown\n    if(!inputRegExp.test(inputValue)) {\n        markedEl.classList.add('invalid');\n    } else {\n        markedEl.classList.remove('invalid');\n    }\n\n    return inputValue;\n}\n/////\n// MODAL\n/////\nexport const createModal = (text, subText, buttonText) => {\n    const modal = document.createElement('div');\n    const body = document.body;\n\n    modal.classList.add('modal');\n    modal.innerHTML = `<div class=\"modal__backdrop\"></div>\n    <div class=\"modal__window\">\n        <div class=\"modal__text\">${text}</div>\n        <div class=\"modal__subtext\">${subText}</div>\n        <button class=\"modal__button\">${buttonText}</button>\n        <div class=\"close-button\"></div>\n    </div>`;\n   \n    body.appendChild(modal);\n\n    const modalButton = modal.querySelector('.modal__button');\n    const modalCloseButton = modal.querySelector('.close-button');\n\n    modalButton.addEventListener('click', removeModal.bind(this, modal));\n    modalCloseButton.addEventListener('click', removeModal.bind(this, modal))\n}\n\nexport const removeModal = modal => {\n    modal.parentElement.removeChild(modal);\n}\n/////\n// CART-HINT\n/////\nexport const removeCartHint = cartHint => {\n    cartHint.parentElement.removeChild(cartHint);\n}\nexport const createCartHint = (state, text) => {\n\n    // Removing current cart hint if any\n    const currentCartHint = document.querySelector('.cart-hint');\n\n    if(currentCartHint) {\n        currentCartHint.parentElement.removeChild(currentCartHint);\n    }\n\n    // State = 'success' | 'failed'\n    if(state !== 'success' && state !== 'failed') {\n        return;\n    }\n\n    let cartHint = document.createElement('div');\n    const body = document.body;\n\n    cartHint.classList.add('cart-hint');\n    cartHint.classList.add('cart-hint--visible');\n    cartHint.classList.add(`cart-hint--${state}`);\n    cartHint.innerHTML = `<div class=\"cart-hint__text\">\n    ${text}\n    </div>\n    <div class=\"cart-hint__symbol cart-hint__symbol--${state}\">\n\n    </div>\n    <button class=\"close-button\">\n\n    </button>`;\n\n    body.appendChild(cartHint);\n\n    const cartHintCloseButton = cartHint.querySelector('button');\n    cartHintCloseButton.addEventListener('click', removeCartHint.bind(this, cartHint));\n\n    // Cart hint gradually dissapears after 5 seconds\n    setTimeout(() => {\n        if(cartHint) {\n            cartHint.addEventListener('animationend', () => {\n                removeCartHint(cartHint);\n            })\n            switchClass(cartHint, 'cart-hint--visible', 'cart-hint--hiding');\n        }\n    }, 5000)\n}\n/////\n//CART\n/////\nexport const addToCart = (postCartData) => {\n\n    return ajax.postCartHandler(postCartData)\n    .then((updatedCart) => {\n        createCartHint('success', `Produkt byl úspěšně přidán do košíku`);         \n        return updatedCart;           \n    }).catch(err => {\n        createCartHint('failed', `Nastala chyba, produkt nebyl přidán do košíku`);\n    });\n\n};\nexport const removeFromCart = (postCartData) => {\n\n    return ajax.postCartHandler(postCartData)\n    .then((updatedCart) => {\n        createCartHint('success', `Produkt byl úspěšně odebrán z košíku`);         \n        return updatedCart;           \n    }).catch(err => {\n        createCartHint('failed', `Nastala chyba, produkt nebyl odebrán z košíku`);\n    });\n\n}\nexport const updateCartItem = (cartItem, updatedCart) => {\n\n    const cartItemObj = updatedCart.items.find(item => {\n        return item.product._id = cartItem.dataset.productid;\n    })\n\n    const amountEl = cartItem.querySelector('.cart-item__amount-box__amount');\n    const priceEl = cartItem.querySelector('.cart-item__price');\n\n    if(!cartItemObj) {\n\n        cartItem.parentElement.removeChild(cartItem);\n\n    } else {\n\n        amountEl.textContent = `${cartItemObj.amount}ks`;\n        priceEl.textContent = +cartItemObj.product.price * cartItemObj.amount + 'Kč';\n\n    }\n\n    updateTotalPrice(updatedCart);\n    updateCartPage();\n}\n\nexport const updateCartPage = () => {\n    \n    const cartItem = document.querySelector('.cart-item');\n\n    const cartOrder = document.getElementById('cart-order');\n    const emptyCartContent = document.querySelector('.cart__cart-content__empty');\n    const summary = document.querySelector('.cart__cart-content__summary');\n    const dph = document.querySelector('.cart__cart-content__dph');\n    const button = document.getElementById('to-order');\n\n    if(!cartItem) {\n\n        cartOrder.style.display = 'none';\n        summary.style.display  = 'none';\n        emptyCartContent.style.display = 'block';\n        dph.style.display = 'none';\n        button.style.display = 'none';\n\n    } else {\n\n        cartOrder.style.display = 'block';\n        summary.style.display  = 'block';\n        emptyCartContent.style.display = 'none';\n        dph.style.display = 'block';\n        button.style.display = 'block';\n    }\n}\n\nexport const updateTotalPrice  = (updatedCart) => {\n    \n    const priceEl = document.querySelector(\".cart__cart-content__summary__price\");\n\n    priceEl.textContent = `${updatedCart.total}Kč`;\n\n}\n\n","///////////////////////////////////\n///// DEFINE STATE\nexport default {\n    categoriesSlider: {\n        selectedArr: null // 'left' || 'right'\n    },\n    hamburgerBtn: null\n}","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tif(__webpack_module_cache__[moduleId]) {\n\t\treturn __webpack_module_cache__[moduleId].exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop)","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// startup\n// Load entry module\n__webpack_require__(\"./src/js/index.js\");\n// This entry module used 'exports' so it can't be inlined\n"],"sourceRoot":""}